 <div class="cust-variant-swatches {% if block.settings.shape == 'square' %} square_swatch {% else %} circle_swatch {% endif %} {{ classes }}">
       <a href="{{ product.url }}" class="cust-swatch-item active" title="{{ product.title }}">
          {% if product.metafields.custom.swatch_featured_image %}
            <img src="{{ product.metafields.custom.swatch_featured_image | img_url: 'master' }}" alt="{{ product.title }}">
            {% else %}
            <img src="{{ product.featured_image | img_url: 'master' }}" alt="{{ product.title }}">
            {% else %}
            {% endif %}
        </a>
  {%- if product.metafields.custom.variant_swatches -%}
     
    {%- for swatch in product.metafields.custom.variant_swatches.value -%}
        {%- if swatch.available -%}
            <a href="{{ swatch.url }}" class="cust-swatch-item" title="{{ swatch.title }}">
              {% if swatch.metafields.custom.swatch_featured_image %}
                <img src="{{ swatch.metafields.custom.swatch_featured_image | img_url: 'master' }}" alt="{{ swatch.title }}">
                {% else %}
                <img src="{{ swatch.featured_image | img_url: 'master' }}" alt="{{ swatch.title }}">
                {% else %}
                {% endif %}
            </a>
        {%- endif -%}
    {%- endfor -%}
  
  {%- endif -%}
</div>